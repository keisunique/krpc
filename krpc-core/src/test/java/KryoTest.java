import com.esotericsoftware.kryo.Kryo;
import com.esotericsoftware.kryo.io.Input;
import com.esotericsoftware.kryo.io.Output;
import com.esotericsoftware.kryo.serializers.CompatibleFieldSerializer;
import com.esotericsoftware.kryo.util.DefaultInstantiatorStrategy;
import com.fasterxml.jackson.core.type.TypeReference;
import com.mycz.arch.common.util.JsonKit;
import org.objenesis.strategy.StdInstantiatorStrategy;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.util.Arrays;
import java.util.HashMap;

public class KryoTest {

    public static void main(String[] args) throws IOException {

        Kryo kryo = new Kryo();
        kryo.setRegistrationRequired(false);//默认值为true，避免版本变化显式设置
        kryo.setReferences(true);//检测循环依赖，默认值为true,避免版本变化显式设置
        kryo.setDefaultSerializer(CompatibleFieldSerializer.class);
        ((DefaultInstantiatorStrategy) kryo.getInstantiatorStrategy())
                .setFallbackInstantiatorStrategy(new StdInstantiatorStrategy());//设定默认的实例化器

        byte[] b = {-68, 16, 1, 5, 1, -128, -120, -2, -53, -15, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -83, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 46, 112, 110, 103, 3, 1, -81, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 45, 50, 46, 112, 110, 103, 9, -114, 7, 3, 1, -125, -26, -105, -91, -27, -72, -72, 1, 5, 1, -8, -111, -37, -19, -15, 48, 9, -70, 16, 1, 5, 1, -128, -120, -2, -53, -15, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -83, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 46, 112, 110, 103, 3, 1, -81, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 45, 50, 46, 112, 110, 103, 9, -114, 7, 3, 1, -125, -26, -105, -91, -27, -72, -72, 1, 5, 1, -8, -111, -37, -19, -15, 48, 9, -72, 16, 1, 5, 1, -128, -120, -2, -53, -15, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -83, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 46, 112, 110, 103, 3, 1, -81, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 45, 50, 46, 112, 110, 103, 9, -114, 7, 3, 1, -125, -26, -105, -91, -27, -72, -72, 1, 5, 1, -8, -111, -37, -19, -15, 48, 9, -74, 16, 1, 5, 1, -128, -120, -2, -53, -15, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -83, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 46, 112, 110, 103, 3, 1, -81, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 45, 50, 46, 112, 110, 103, 9, -114, 7, 3, 1, -125, -26, -105, -91, -27, -72, -72, 1, 5, 1, -8, -111, -37, -19, -15, 48, 9, -76, 16, 1, 5, 1, -128, -120, -2, -53, -15, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -83, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 46, 112, 110, 103, 3, 1, -81, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 45, 50, 46, 112, 110, 103, 9, -114, 7, 3, 1, -125, -26, -105, -91, -27, -72, -72, 1, 5, 1, -8, -111, -37, -19, -15, 48, 9, -78, 16, 1, 5, 1, -128, -120, -2, -53, -15, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -83, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 46, 112, 110, 103, 3, 1, -81, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 45, 50, 46, 112, 110, 103, 9, -114, 7, 3, 1, -125, -26, -105, -91, -27, -72, -72, 1, 5, 1, -8, -111, -37, -19, -15, 48, 9, -80, 16, 1, 5, 1, -128, -120, -2, -53, -15, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -83, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 46, 112, 110, 103, 3, 1, -81, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 45, 50, 46, 112, 110, 103, 9, -114, 7, 3, 1, -125, -26, -105, -91, -27, -72, -72, 1, 5, 1, -8, -111, -37, -19, -15, 48, 9, -82, 16, 1, 5, 1, -128, -120, -2, -53, -15, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -83, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 46, 112, 110, 103, 3, 1, -81, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 45, 50, 46, 112, 110, 103, 9, -114, 7, 3, 1, -125, -26, -105, -91, -27, -72, -72, 1, 5, 1, -8, -111, -37, -19, -15, 48, 9, -84, 16, 1, 5, 1, -128, -120, -2, -53, -15, 48, 3, 1, -127, 3, 1, -124, -26, -104, -97, -26, -100, -97, -26, -105, -91, 1, 3, 1, 48, 51, 46, 50, -80, 10, 0, 0, 0, 0, 0, 0, 34, 64, 10, 0, 0, 0, 0, 0, 0, 24, 64, 1, 2, 1, -124, 1, 4, 0, 1, 10, 0, 0, 0, 0, 0, 0, 24, 64, 9, 2, 3, 1, -81, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 102, 105, 110, 97, 110, 99, 105, 110, 103, 45, 111, 110, 101, 46, 112, 110, 103, 3, 1, -79, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 102, 105, 110, 97, 110, 99, 105, 110, 103, 45, 111, 110, 101, 45, 50, 46, 112, 110, 103, 9, -36, 1, 3, 1, -125, -27, -73, -91, -24, -75, -124, 1, 5, 1, -8, -111, -61, -5, -17, 48, 9, -86, 16, 1, 5, 1, -128, -72, -27, -44, -17, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -90, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 114, 105, 99, 101, 46, 112, 110, 103, 3, 1, -88, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 114, 105, 99, 101, 45, 50, 46, 112, 110, 103, 9, -48, 1, 3, 1, -125, -23, -92, -112, -23, -91, -82, 1, 5, 1, -120, -29, -62, -5, -17, 48, 9, -88, 16, 1, 5, 1, -128, -72, -27, -44, -17, 48, 3, 1, -127, 1, 10, 0, 0, 0, 0, 0, 0, 8, -64, 9, 2, 3, 1, -90, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 114, 105, 99, 101, 46, 112, 110, 103, 3, 1, -88, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 114, 105, 99, 101, 45, 50, 46, 112, 110, 103, 9, -48, 1, 3, 1, -125, -23, -92, -112, -23, -91, -82, 1, 5, 1, -40, -24, -85, -24, -17, 48, 9, -90, 16, 1, 5, 1, -128, -72, -27, -44, -17, 48, 3, 1, -127, 3, 1, -124, -26, -104, -97, -26, -100, -97, -28, -72, -128, 1, 3, 1, 48, 51, 46, 49, -73, 10, 0, 0, 0, 0, 0, 0, 24, 64, 10, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 1, -126, 1, 4, 0, 1, 10, 0, 0, 0, 0, 0, 0, 24, -64, 9, 2, 3, 1, -90, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 114, 105, 99, 101, 46, 112, 110, 103, 3, 1, -88, 104, 116, 116, 112, 115, 58, 47, 47, 115, 116, 97, 116, 105, 99, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 105, 99, 111, 110, 47, 114, 105, 99, 101, 45, 50, 46, 112, 110, 103, 9, -48, 1, 3, 1, -125, -23, -92, -112, -23, -91, -82, 1, 5, 1, -112, -76, -84, -127, -17, 48, 9, -92, 16, 1, 5, 1, -128, -112, -103, -39, -18, 48, 3, 1, -127, 3, 1, -124, -26, -104, -97, -26, -100, -97, -28, -70, -108, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 1, -125, -26, -120, -112, -27, -118, -97, 3, 1, 50, 48, 50, 51, 48, 52, 48, 51, 50, 48, 52, 53, 51, 52, 55, 54, 51, 48, 48, 54, 53, -71};

//        byte[] b = {1, 4, 99, 111, 100, -27, 100, 97, 116, -31, 109, 101, 115, 115, 97, 103, -27, 116, 114, 97, 99, 101, 73, -28, 2, 2, 1, 0, 99, 111, 109, 46, 109, 121, 99, 122, 46, 97, 114, 99, 104, 46, 97, 112, 105, 46, 100, 101, 102, 105, 110, 101, 46, 66, 97, 115, 101, 82, 101, 115, 112, 111, 110, 115, -27, 1, 3, 99, 111, 100, -27, 100, 97, 116, -31, 109, 101, 115, 115, 97, 103, -27, 2, 2, 1, 1, 99, 111, 109, 46, 109, 121, 99, 122, 46, 97, 114, 99, 104, 46, 97, 112, 105, 46, 115, 101, 114, 118, 105, 99, 101, 46, 109, 111, 111, 110, 98, 105, 108, 108, 46, 114, 101, 115, 112, 111, 110, 115, 101, 46, 66, 97, 108, 97, 110, 99, 101, 68, 101, 102, 97, 117, 108, 116, 82, 101, 115, 112, 111, 110, 115, -27, 1, 9, 99, 111, 118, 101, -14, 99, 114, 101, 97, 116, 101, 84, 105, 109, -27, 101, 120, 112, 101, 110, -28, 105, -28, 105, 110, 99, 111, 109, -27, 110, 97, 109, -27, 114, 101, 99, 111, 114, -28, 115, 117, 114, 112, 108, 117, -13, 117, 112, 100, 97, 116, 101, 84, 105, 109, -27, 3, 1, -75, 104, 116, 116, 112, 115, 58, 47, 47, 102, 105, 108, 101, 46, 109, 121, 99, 122, 46, 120, 121, 122, 47, 98, 97, 99, 107, 103, 114, 111, 117, 110, 100, 47, 49, 54, 55, 55, 54, 51, 57, 53, 48, 49, 48, 53, 49, 49, 53, 46, 112, 110, 103, 0, 10, 0, 0, 0, 0, 0, 0, 0, 0, 9, 2, 10, 0, 0, 0, 0, 0, 0, 0, 0, 3, 1, -123, -23, -69, -104, -24, -82, -92, -24, -76, -90, -26, -100, -84, 1, 2, 106, 97, 118, 97, 46, 117, 116, 105, 108, 46, 65, 114, 114, 97, 121, 76, 105, 115, -12, 1, 1, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 1, -125, -26, -120, -112, -27, -118, -97, 3, 1, 50, 48, 50, 51, 48, 52, 48, 51, 50, 48, 52, 53, 51, 52, 56, 56, 50, 48, 55, 51, 48, -79};

        String s = "{\"id\":1,\"name\":\"默认账本\",\"cover\":\"https://file.mycz.xyz/background/167763950105115.png\",\"createTime\":null,\"updateTime\":null,\"expend\":1249.79,\"income\":0.0,\"surplus\":0.0,\"record\":[{\"date\":\"06.18\",\"week\":\"星期六\",\"income\":0.0,\"expend\":42.0,\"record\":[{\"id\":1012,\"balanceId\":1,\"amount\":-6.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-18 00:00:00\",\"createTime\":\"2022-06-18 23:21:00\"},{\"id\":1011,\"balanceId\":1,\"amount\":-15.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-18 00:00:00\",\"createTime\":\"2022-06-18 23:20:56\"},{\"id\":1010,\"balanceId\":1,\"amount\":-6.0,\"classifyId\":108,\"classifyName\":\"交通\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/car.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/car-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-18 00:00:00\",\"createTime\":\"2022-06-18 23:20:54\"},{\"id\":1009,\"balanceId\":1,\"amount\":-15.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-18 00:00:00\",\"createTime\":\"2022-06-18 23:20:52\"}]},{\"date\":\"06.17\",\"week\":\"星期五\",\"income\":0.0,\"expend\":38.0,\"record\":[{\"id\":1015,\"balanceId\":1,\"amount\":-16.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-17 00:00:00\",\"createTime\":\"2022-06-18 23:21:22\"},{\"id\":1014,\"balanceId\":1,\"amount\":-6.0,\"classifyId\":108,\"classifyName\":\"交通\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/car.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/car-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-17 00:00:00\",\"createTime\":\"2022-06-18 23:21:16\"},{\"id\":1013,\"balanceId\":1,\"amount\":-16.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-17 00:00:00\",\"createTime\":\"2022-06-18 23:21:12\"}]},{\"date\":\"06.16\",\"week\":\"星期四\",\"income\":0.0,\"expend\":66.0,\"record\":[{\"id\":1017,\"balanceId\":1,\"amount\":-66.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-16 00:00:00\",\"createTime\":\"2022-06-18 23:21:36\"}]},{\"date\":\"06.15\",\"week\":\"星期三\",\"income\":0.0,\"expend\":46.0,\"record\":[{\"id\":1016,\"balanceId\":1,\"amount\":-46.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-15 00:00:00\",\"createTime\":\"2022-06-18 23:21:31\"}]},{\"date\":\"06.14\",\"week\":\"星期二\",\"income\":0.0,\"expend\":60.0,\"record\":[{\"id\":1008,\"balanceId\":1,\"amount\":-60.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-14 00:00:00\",\"createTime\":\"2022-06-18 23:20:41\"}]},{\"date\":\"06.13\",\"week\":\"星期一\",\"income\":0.0,\"expend\":66.0,\"record\":[{\"id\":1007,\"balanceId\":1,\"amount\":-66.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-13 00:00:00\",\"createTime\":\"2022-06-18 23:20:12\"}]},{\"date\":\"06.12\",\"week\":\"星期日\",\"income\":0.0,\"expend\":60.0,\"record\":[{\"id\":1003,\"balanceId\":1,\"amount\":-60.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-12 00:00:00\",\"createTime\":\"2022-06-18 23:17:28\"}]},{\"date\":\"06.11\",\"week\":\"星期六\",\"income\":0.0,\"expend\":116.0,\"record\":[{\"id\":1004,\"balanceId\":1,\"amount\":-60.0,\"classifyId\":108,\"classifyName\":\"交通\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/car.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/car-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-11 00:00:00\",\"createTime\":\"2022-06-18 23:17:47\"},{\"id\":1001,\"balanceId\":1,\"amount\":-56.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-11 00:00:00\",\"createTime\":\"2022-06-18 23:16:48\"}]},{\"date\":\"06.10\",\"week\":\"星期五\",\"income\":0.0,\"expend\":86.0,\"record\":[{\"id\":1002,\"balanceId\":1,\"amount\":-86.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-10 00:00:00\",\"createTime\":\"2022-06-18 23:16:58\"}]},{\"date\":\"06.09\",\"week\":\"星期四\",\"income\":0.0,\"expend\":90.79,\"record\":[{\"id\":1006,\"balanceId\":1,\"amount\":-90.0,\"classifyId\":107,\"classifyName\":\"服饰\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/t-shirt.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/t-shirt-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-09 00:00:00\",\"createTime\":\"2022-06-18 23:19:47\"},{\"id\":993,\"balanceId\":1,\"amount\":-0.77,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-09 00:00:00\",\"createTime\":\"2022-06-09 15:22:09\"},{\"id\":992,\"balanceId\":1,\"amount\":-0.02,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-09 00:00:00\",\"createTime\":\"2022-06-09 15:01:29\"}]},{\"date\":\"06.08\",\"week\":\"星期三\",\"income\":0.0,\"expend\":68.0,\"record\":[{\"id\":1005,\"balanceId\":1,\"amount\":-68.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-08 00:00:00\",\"createTime\":\"2022-06-18 23:19:22\"}]},{\"date\":\"06.07\",\"week\":\"星期二\",\"income\":0.0,\"expend\":89.0,\"record\":[{\"id\":1000,\"balanceId\":1,\"amount\":-89.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-07 00:00:00\",\"createTime\":\"2022-06-18 23:16:39\"}]},{\"date\":\"06.06\",\"week\":\"星期一\",\"income\":0.0,\"expend\":57.0,\"record\":[{\"id\":998,\"balanceId\":1,\"amount\":-56.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-06 00:00:00\",\"createTime\":\"2022-06-18 23:16:21\"},{\"id\":991,\"balanceId\":1,\"amount\":-1.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-06 00:00:00\",\"createTime\":\"2022-06-06 11:30:28\"}]},{\"date\":\"06.05\",\"week\":\"星期日\",\"income\":0.0,\"expend\":69.0,\"record\":[{\"id\":999,\"balanceId\":1,\"amount\":-69.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-05 00:00:00\",\"createTime\":\"2022-06-18 23:16:30\"}]},{\"date\":\"06.04\",\"week\":\"星期六\",\"income\":0.0,\"expend\":98.0,\"record\":[{\"id\":997,\"balanceId\":1,\"amount\":-98.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-04 00:00:00\",\"createTime\":\"2022-06-18 23:16:05\"}]},{\"date\":\"06.03\",\"week\":\"星期五\",\"income\":0.0,\"expend\":88.0,\"record\":[{\"id\":996,\"balanceId\":1,\"amount\":-88.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-03 00:00:00\",\"createTime\":\"2022-06-18 23:15:57\"}]},{\"date\":\"06.02\",\"week\":\"星期四\",\"income\":0.0,\"expend\":80.0,\"record\":[{\"id\":995,\"balanceId\":1,\"amount\":-80.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-02 00:00:00\",\"createTime\":\"2022-06-18 23:15:50\"}]},{\"date\":\"06.01\",\"week\":\"星期三\",\"income\":0.0,\"expend\":30.0,\"record\":[{\"id\":994,\"balanceId\":1,\"amount\":-30.0,\"classifyId\":104,\"classifyName\":\"餐饮\",\"classifyIconOne\":\"https://static.mycz.xyz/icon/rice.png\",\"classifyIconTwo\":\"https://static.mycz.xyz/icon/rice-2.png\",\"remark\":\"\",\"recordDate\":\"2022-06-01 00:00:00\",\"createTime\":\"2022-06-18 23:15:41\"}]}]}";
//        String s = """
//                {
//                    "id":1,
//                    "name":"默认账本",
//                    "cover":"https://file.mycz.xyz/background/167763950105115.png",
//                    "createTime":null,
//                    "updateTime":null,
//                    "expend":1249.79,
//                    "income":0,
//                    "surplus":0
//                }
//                """;

        HashMap<String, Object> map = JsonKit.toBean(s, new TypeReference<>() {
        });

        ByteArrayOutputStream bb = new ByteArrayOutputStream();
        ObjectOutputStream objectOutputStream = new ObjectOutputStream(bb);
        objectOutputStream.writeObject(map);
        objectOutputStream.flush();
        objectOutputStream.close();
        byte[] bytes = bb.toByteArray();

        Output output = new Output(bytes, bytes.length);

        kryo.writeObjectOrNull(output, map, map.getClass());

        byte[] out = output.toBytes();
        System.out.println(Arrays.toString(out));

        System.out.println(out.length);

//        System.out.println(JsonKit.toJson(map));

        ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(out);
        Input input = new Input(byteArrayInputStream);

        HashMap response = kryo.readObject(input, HashMap.class);
        System.out.println(JsonKit.toJson(response));
    }
}
